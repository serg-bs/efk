elasticsearch:
  curator:
    enabled: true
  image:
    repository: sergbs/elastic
    tag: latest
  volumePermissions:
    enabled: true

  extraVolumes:
  - name: config
    secret:
      secretName: opendistro-config
      items:
        - key: config.yml
          path: config.yml
  - name: roles-mapping
    secret:
      secretName: opendistro-config
      items:
        - key: roles_mapping.yml
          path: roles_mapping.yml
  extraVolumeMounts:
    - mountPath: /opt/bitnami/elasticsearch/plugins/opendistro_security/securityconfig/config.yml
      subPath: config.yml
      name: config
    - mountPath: /opt/bitnami/elasticsearch/plugins/opendistro_security/securityconfig/roles_mapping.yml
      subPath: roles_mapping.yml
      name: roles-mapping
kibana:
  image:
    repository: sergbs/kibana
    tag: latest
  extraConfiguration:
    elasticsearch.username: "kibanaserver"
    elasticsearch.password: "kibanaserver"
    elasticsearch.ssl.verificationMode: certificate
    elasticsearch.ssl.certificateAuthorities: "/opt/bitnami/kibana/certificates/root-ca.pem"
    opendistro_security.auth.type: "basicauth"
    opendistro_security.basicauth.forbidden_usernames: ["kibanaserver", "logstash"]
    server.ssl.enabled: true
    server.ssl.key: "/opt/bitnami/kibana/certificates/esnode-key.pem"
    server.ssl.certificate: "/opt/bitnami/kibana/certificates/esnode.pem"
    opendistro_security.accountinfo.enabled: true
  volumePermissions:
    enabled: true
  elasticsearch:
    hosts:
    - "efk-elasticsearch-coordinating-only"
    port: 9200
    tls: true
  ingress:
    enabled: true
    hosts:
      - name: kibana.local
        path: /
fluentd:
  aggregator:
    enabled: true
    configMap: elasticsearch-output
    extraEnv:
    - name: ELASTICSEARCH_HOST
      value: "efk-elasticsearch-coordinating-only"
    - name: ELASTICSEARCH_PORT
      value: "9200"
  forwarder:
    enabled: true
    configMap: apache-log-parser
    extraEnv:
    - name: FLUENTD_DAEMON_USER
      value: root
    - name: FLUENTD_DAEMON_GROUP
      value: root
